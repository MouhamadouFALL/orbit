<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="view_sale_order_payment_plan_filter" model="ir.ui.view">
            <field name="name">sale.order.payment.plan.select</field>
            <field name="model">sale.order.payment.plan</field>
            <field name="arch" type="xml">
                <search string="Search Follow-up">
                    <field name="sale_order_id" />
                    <field name="name" />
                    <field name="client" />
<!--                    <field name="due_date" />-->
<!--                    <filter name="due_date" string="Echeance" date="due_date"/>-->
                    <!-- <group expqnd="0" string="Group By">
                        <filter string="Date Echeance" name="mdate" context="{'group_by': 'due_date'}"/>
                    </group> -->
                </search>
            </field>
    </record>

    <record id="action_sale_order_payment_plan_form" model="ir.actions.act_window">
            <field name="name">Suivi SO</field>
            <field name="res_model">sale.order.payment.plan</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_sale_order_payment_plan_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to define follow-up levels and their related actions.
                </p>
                <p>
                    For each step, specify the actions to be taken and delay in days. It is
                    possible to use print and e-mail templates to send specific messages to
                    the customer.
                </p>
            </field>
    </record>

    <record id="view_sale_order_payment_plan_form" model="ir.ui.view">
            <field name="name">sale.order.payment.plan.form</field>
            <field name="model">sale.order.payment.plan</field>
            <field name="arch" type="xml">
                <form string="Follow-up Action">

                    <sheet>
                        <group>
                            <group name="group_name">
                                <field name="name"/>
                                <field name="sale_order_id" widget="select" options="{'no_create': True, 'no_open': True}"/>
                                <field name="client" widget="many2one_tags" options="{'no_create': True, 'no_open': True}"/>
                            </group>
                            <group>
                                <field name="payment_date" string="Date Echeance"/>
                                <field name="dates" string="Date Echeance Test"/>
                                <field name="payment_amount" string="montant Ã  verser"/>
                                <field name="payment_status" string="Statut" />
                            </group>
                        </group>
                        <!--<group>

                            <group>
                                <field name="amount_to_paid"/>
                                <field name="amount_paid"/>
                                <field name="amount_remaining"/>
                            </group>
                        </group>-->
                    </sheet>
                </form>
            </field>
    </record>

    <record id="view_sale_order_payment_plan_tree" model="ir.ui.view">
        <field name="name">sale.order.payment.plan.tree</field>
        <field name="model">sale.order.payment.plan</field>
        <field name="arch" type="xml">
            <tree string="Follow-up Action" >
                <field name="name"/>
                <field name="sale_order_id" widget="many2one_tags"/>
                <field name="client" widget="many2one_tags" optional="hide"/>
                <field name="payment_date"/>
                <field name="payment_amount"/>
                <field name="payment_status"/>
                <field name="payed_amount" optional="hide"/>
                <field name="amount_remaining" optional="hide"/>
            </tree>
        </field>
    </record>


    <record id="view_sale_order_form_inherit_payment_plan" model="ir.ui.view">
        <field name="name">sale.order.form.inherit.payment.plan</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="inside">
                <group string="Plan de Paiement">
                    <field name="payment_plan_ids">
                        <tree editable="bottom">
                            <field name="payment_date"/>
                            <field name="payment_amount"/>
                            <field name="payment_status"/>
<!--                            <field name="dates"/>-->
                        </tree>
                    </field>
                </group>
            </xpath>
        </field>
    </record>

</odoo>